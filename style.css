/* Lean Training — Presenter styles (v7.4)
   - Fix: buttons not clickable (whiteboard no-pointer until ON)
   - Fix: mini-QR shows left-bottom resize indicator + sane defaults
*/

:root{
  --bg:#0b0f14;--panel:#111823;--muted:#90a4b4;--text:#e6eef6;--accent:#58c4dc;--accent2:#7cd992;--warn:#ffb86b;--err:#ff6b6b;--card:#0f1520;--chip:#182231; --ink:#7cd992;
}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  background:radial-gradient(1200px 1200px at 120% -10%, #102338 0%, #0b0f14 45%);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial
}
footer{padding:10px 0 18px}
.wrap{display:grid;grid-template-rows:auto 1fr auto;min-height:100%}

/* Header */
header{display:flex;align-items:center;gap:16px;padding:14px 18px;border-bottom:1px solid #1e2a39;background:linear-gradient(180deg,#0f1622,#0c111a)}
header h1{font-size:18px;margin:0;letter-spacing:.3px}
header .badge{font-size:12px;background:var(--chip);padding:4px 8px;border-radius:999px;color:var(--muted)}

/* Layout */
main{padding:18px;display:grid;gap:18px}
.grid{display:grid;gap:14px}
.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}

/* Cards */
.card{background:linear-gradient(180deg,#0f1520,#0c121a);border:1px solid #1b2635;border-radius:18px;box-shadow:0 8px 20px rgba(0,0,0,.25);padding:16px}
.card h2{margin:.2rem 0 0.6rem;font-size:16px;letter-spacing:.2px}

/* Typo & helpers */
.muted{color:var(--muted)}
.mini{font-size:12px}
.center{display:grid;place-items:center}
.hidden{display:none}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}
.mt8{margin-top:8px}
.mt12{margin-top:12px}
.mt10{margin-top:10px}
.mt6{margin-top:6px}
.mb2{margin-bottom:2px}
.mb8{margin-bottom:8px}
.gap6{gap:6px}
.gap8{gap:8px}
.gap10{gap:10px}
.gap12{gap:12px}
.right{margin-left:auto}
.hint{font-size:12px;color:#a7b6c6}
.justify-between{justify-content:space-between}
.items-end{align-items:flex-end}
.m0{margin:0}
.w320{width:320px}
.w360{width:360px}
.w80{width:80px}
.w160{width:160px}
.w100{width:100px}
.w100p{width:100%}
.flex1{flex:1}

/* Inputs & buttons */
.row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
input,select,button{background:#0e1824;border:1px solid #1e2c3e;color:var(--text);border-radius:12px;padding:10px 12px;font-size:14px;outline:none}
button{cursor:pointer;transition:transform .05s ease,opacity .2s}
button:hover{opacity:.95}
.pill{border-radius:999px}
.primary{background:linear-gradient(180deg,#1a9ac4,#1688ae);border-color:#1d94b8}
.ghost{background:#0f1520;border-color:#233045}
.danger{background:linear-gradient(180deg,#d04a4a,#b23b3b);border-color:#b14040}

/* Tabs */
.tabs{display:flex;gap:8px}
.tab{padding:8px 12px;border:1px solid #1e2a39;background:#0f1520;border-radius:999px;color:var(--muted);cursor:pointer}
.tab.active{color:#dff4ff;background:#122338;border-color:#234b6d}
.slide{display:none}
.slide.active{display:block}

/* Chips & lists */
.chip{background:var(--chip);border:1px solid #243349;border-radius:999px;padding:4px 8px;font-size:12px;color:#cfd9e3}

/* Table */
.leader{width:100%;border-collapse:separate;border-spacing:0 8px}
.leader td{background:#0f1520;border:1px solid #1f2c3d;padding:10px 12px}
.leader tr td:first-child{border-radius:12px 0 0 12px}
.leader tr td:last-child{border-radius:0 12px 12px 0}

/* Toast */
.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#102030;border:1px solid #234;box-shadow:0 10px 30px rgba(0,0,0,.35);color:#cfe7ff;padding:10px 14px;border-radius:12px;display:none;z-index:2000}

/* Progress */
.progress{height:8px;background:#142030;border:1px solid #223447;border-radius:999px;overflow:hidden}
.progress>div{height:100%;background:linear-gradient(90deg,#1aa6ce,#2ad08c)}
#timerBar{width:0%}

/* Details */
details{background:#0e1622;border:1px solid #213047;border-radius:12px;padding:8px 12px}
details summary{cursor:pointer;color:#9ac6ff}
pre{white-space:pre-wrap;word-wrap:break-word}

/* Pages & whiteboard */
.page-shell{position:relative}
.pages-nav{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.dots{display:flex;gap:6px}
.dot{width:8px;height:8px;border-radius:999px;background:#23354d;border:1px solid #2b415f}
.dot.active{background:#54b6cf}
.page{position:relative;background:#0c121a;border:1px solid #1b2635;border-radius:18px;min-height:520px;padding:12px;overflow:hidden}
.page .content{position:relative;z-index:1}
.page canvas.whiteboard{position:absolute;inset:0;z-index:2; pointer-events:none;}
/* Drawing cursor and pointer activation only when ON */
body.ink-on canvas.whiteboard{pointer-events:auto; cursor:crosshair}

/* FAB + toolbar */
.fab{position:fixed;right:18px;bottom:18px;z-index:1000;background:#0f2a42;border:1px solid #1e3954;border-radius:999px;padding:12px;cursor:pointer;box-shadow:0 12px 28px rgba(0,0,0,.5);backdrop-filter:blur(6px);transition:transform .1s ease, background .2s ease}
.fab:hover{transform:translateY(-1px)}
.fab.active{background:#1b3e5c;border-color:#2e5c84}
.wb-panel{position:fixed;right:18px;bottom:82px;z-index:1001;background:#0e1824;border:1px solid #22364c;border-radius:14px;padding:10px;display:none;min-width:260px;box-shadow:0 18px 36px rgba(0,0,0,.5);backdrop-filter:blur(6px)}
.wb-open .wb-panel{display:block}
.wb-panel .row{gap:8px}
.wb-panel label{font-size:12px;color:#b9c7d6}
.color-swatch{width:28px;height:28px;border-radius:999px;border:2px solid #274b6b;box-shadow:0 2px 8px rgba(0,0,0,.4);cursor:pointer}
.color-hidden{position:absolute;left:-9999px;opacity:0;width:0;height:0}
.swatch{width:20px;height:20px;border-radius:999px;border:2px solid #274b6b;cursor:pointer}
.swatchwrap{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.seg{display:flex;border:1px solid #263a52;border-radius:8px;overflow:hidden}
.seg button{border:0;background:#0f1520;padding:6px 10px}
.seg button.active{background:#17304a}
.size-dot{width:12px;height:12px;border-radius:999px;display:inline-block;margin-left:6px;box-shadow:0 0 0 2px #0a0a0a66}
.wb-ind{position:fixed;left:18px;bottom:24px;z-index:1000;background:#15324a;border:1px solid #2b4c6b;border-radius:999px;padding:6px 10px;font-size:12px;color:#d7f1ff;box-shadow:0 10px 24px rgba(0,0,0,.45);display:none}
.wb-ind.on{display:inline-block}
.highlight-draw{box-shadow:0 0 0 2px #2aa6ff55 inset, 0 0 0 4px #2aa6ff22 inset;border-radius:18px}

/* Step-by-step builds */
.build-hidden{opacity:0;transform:translateY(8px);transition:opacity .25s ease,transform .25s ease}
.build-visible{opacity:1;transform:none;transition:opacity .25s ease,transform .25s ease}
.build-tag{position:absolute;top:-8px;right:-8px;background:#214761;color:#dff5ff;border:1px solid #2f6386;border-radius:999px;font-size:10px;padding:2px 6px;box-shadow:0 2px 8px rgba(0,0,0,.4);pointer-events:none}
.rel{position:relative}

/* Avatar picker */
#avatarPick{justify-content:center}
#avatarPick button{font-size:32px}
#avatarPick button.active{ outline:2px solid #2aa6ff; }

/* Join form */
#joinForm{display:flex;flex-direction:column;align-items:center}
#joinPreview{display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:12px}
#joinPreview .emoji{font-size:40px}

/* Session helpers */
.session-grid{display:grid;grid-template-columns:1fr;gap:12px}
.session-warn{margin-top:8px;background:#332a12;border-color:#6b5a2a;color:#ffd18b}
.session-note{margin:8px 0 0}

/* Always-on mini QR (resizable) */
.mini-qr{
  position:fixed; top:12px; right:12px; z-index:1200;
  width:110px; height:110px; /* default ≈50% of old 220px */
  min-width:48px; min-height:48px; max-width:40vh; max-height:40vh;
  background:#0e1622; border:1px solid #213047; border-radius:12px;
  box-shadow:0 10px 28px rgba(0,0,0,.45);
  display:grid; place-items:center; overflow:hidden;
  user-select:none; -webkit-user-select:none; -ms-user-select:none;
  resize:none; /* disable native bottom-right handle */
}
/* Custom bottom-left handle */
.mini-qr-handle{
  position:absolute; left:0; bottom:0; width:16px; height:16px;
  cursor:nesw-resize;
}
.mini-qr-handle::after{
  content:''; position:absolute; left:2px; bottom:2px; width:10px; height:10px;
  border-left:2px solid #345; border-bottom:2px solid #345; border-radius:2px; opacity:.8;
}
/* Image fills box, never intercepts pointer */
.mini-qr img{display:block; width:100%; height:100%; pointer-events:none}

/* Utilities */
@media (max-width: 920px){
  .cols-2{grid-template-columns:1fr}
  .wb-panel{right:12px;left:12px;min-width:0}
}
